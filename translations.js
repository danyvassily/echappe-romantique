// Système de traductions multilingue pour Échappée Romantique
const translations = {
  fr: {
    // Navigation
    "nav-title": "Échappée",
    "nav-subtitle": "Romantique",
    "nav-signature": "Signature",
    "nav-echappees": "Nos Échappées",
    "nav-decouverte": "Découverte",
    "nav-recapitulatif": "Récapitulatif",
    "nav-reserve": "Réserver",
    "nav-menu": "Menu",
    "language-selector": "Langue:",

    // Page d'accueil
    "hero-title": "Échappée Romantique",
    "hero-subtitle":
      "Séjours romantiques d'exception en vallée de la Loire avec chauffeur privé - Châteaux, spa et gastronomie",
    "hero-cta1": "Découvrir nos escapades",
    "hero-cta2": "En savoir plus",

    // Section À propos
    "about-title": "Notre Passion vous faire plaisir",
    "about-subtitle":
      "Créateurs de séjours romantiques uniques en vallée de la Loire avec chauffeur privé pour couples en quête d'exception",
    "about-histoire-title": "Notre Histoire",
    "about-histoire-text":
      "Fondée par un passionné d'aviation, Échappée Romantique est née de la volonté de créer des moments inoubliables en alliant le charme des vols privés à des séjours dans des lieux d'exception.",
    "about-experiences-title": "Expériences Uniques",
    "about-experiences-text":
      "Chaque itinéraire est soigneusement élaboré pour des moments de complicité",
    "about-vols-title": "Vols Privés",
    "about-vols-text":
      "Découvrez le luxe des vols privés à partir d'Halloween vers des destinations d'exception",
    "about-quote": '"Transformons vos rêves d\'évasion en réalité"',

    // Section Expériences
    "experiences-title": "Nos Expériences d'Exception",
    "experiences-subtitle":
      "Découvrez notre sélection d'établissements inoubliables. Un vol, une région, mille émotions à partager",
    "experiences-cta": "Explorer nos escapades",

    // Footer
    "footer-contact": "Contact",
    "footer-social": "Suivez-nous",
    "footer-instagram": "Rejoignez-nous sur Instagram",
    "footer-copyright": "© 2024 Échappée Romantique. Tous droits réservés.",

    // Page Échappées
    "echappees-title": "Nos Séjours d'Exception",
    "echappees-subtitle":
      "2 formules de séjours romantiques avec chauffeur privé en vallée de la Loire - Châteaux, spa et gastronomie d'exception",
    "echappees-section-title": "Choisissez votre échappée",
    "echappees-section-subtitle":
      "Deux expériences romantiques uniques alliant luxe, romance et découverte des châteaux de la Loire avec chauffeur privé",

    // Formule Découverte
    "decouverte-title": "Découverte",
    "decouverte-location": "Domaine de l'Arbrelle, Amboise",
    "decouverte-price": "750€ par personne",
    "decouverte-popular": "Populaire",
    "decouverte-cta": "Découvrir cette échappée",
    "decouverte-feature1": "Chambre raffinée de 20m² avec vue",
    "decouverte-feature2": "Petit-déjeuner inclus",
    "decouverte-feature3": "Visite des châteaux d'Amboise",
    "decouverte-feature4": "Réductions chez nos partenaires",

    // Formule Signature
    "signature-title": "Séjour Signature",
    "signature-location": "Le Clos d'Amboise",
    "signature-price": "1200€ par personne",
    "signature-premium": "Premium",
    "signature-cta": "Découvrir cette échappée",
    "signature-feature1": "Chambre de charme 27m² vue parc",
    "signature-feature2": "Massage duo (1h) + spa (30min)",
    "signature-feature3": "Expérience gastronomique & brunch",
    "signature-feature4": "Accès piscine chauffée extérieure",

    // Formulaire de réservation
    "reservation-title": "Réservez votre échappée",
    "reservation-subtitle":
      "Planifiez votre séjour romantique en quelques étapes simples",
    "reservation-step1": "Type de séjour",
    "reservation-step2": "Voyageurs",
    "reservation-step3": "Dates",
    "reservation-step4": "Récapitulatif",

    // Fil d'Ariane
    "breadcrumb-home": "Accueil",
    "breadcrumb-echappees": "Nos Échappées",
    "breadcrumb-decouverte": "Formule Découverte",
    "breadcrumb-signature": "Séjour Signature",

    // Informations pratiques
    "info-title": "Informations pratiques",
    "info-subtitle":
      "On s'occupe de tout, et vous profitez de notre savoir-faire.",
    "info-depart": "Départ",
    "info-depart-text": "Prise en charge dès votre domicile.",
    "info-activites": "Activités",
    "info-activites-text":
      "Découvertes de différents châteaux, activités variées selon la saison et la météo.",
    "info-trajet": "Trajet",
    "info-trajet-text":
      "Le voyage se déroule dans un véhicule premium, petit déjeuner signature pendant le trajet.",
    "info-repas": "Repas",
    "info-repas-text": "Formule tout inclus, du petit-déjeuner au dîner.",
    "info-hebergement": "Hébergement",
    "info-hebergement-text":
      "Hébergement signature, à la hauteur du séjour romantique.",

    // Page Signature
    "signature-hero-title": "Séjour Signature",
    "signature-hero-subtitle":
      "Expérience romantique premium au Clos d'Amboise - Spa, Gastronomie et Châteaux de la Loire",
    "signature-clos-title": "Le Clos d'Amboise",
    "signature-clos-text":
      "Une nuit dans une chambre double confort avec petit déjeuner.",
    "signature-nuitee-title": "La Nuitée",
    "signature-bienetre-title": "Bien-Être",
    "signature-repas-title": "Les Repas",
    "signature-activites-title": "Activités",

    // Page Découverte
    "decouverte-hero-title": "Formule Découverte",
    "decouverte-hero-subtitle":
      "Séjour romantique de 2 jours au Domaine de l'Arbrelle à Amboise - Châteaux de la Loire",
    "decouverte-domaine-title": "Domaine de l'arbrelle",
    "decouverte-liberte-title": "La Liberté",
    "decouverte-repas-title": "Repas",
    "decouverte-activites-title": "Activités",

    // Contact
    "contact-title": "Prise de Rendez-vous",
    "contact-text":
      "Vous souhaitez en savoir plus ou planifier un rendez-vous ? Contactez-nous directement, nous serons ravis d'échanger avec vous.",
    "contact-email": "Par mail :",
    "contact-phone": "Par téléphone :",
  },

  en: {
    // Navigation
    "nav-title": "Romantic",
    "nav-subtitle": "Getaway",
    "nav-signature": "Signature",
    "nav-echappees": "Our Getaways",
    "nav-decouverte": "Discovery",
    "nav-recapitulatif": "Summary",
    "nav-reserve": "Book",
    "nav-menu": "Menu",
    "language-selector": "Language:",

    // Homepage
    "hero-title": "Romantic Getaway",
    "hero-subtitle":
      "Exceptional romantic stays in the Loire Valley with private driver - Castles, spa and gastronomy",
    "hero-cta1": "Discover our escapes",
    "hero-cta2": "Learn more",

    // About section
    "about-title": "Our Passion is to please you",
    "about-subtitle":
      "Creators of unique romantic stays in the Loire Valley with private driver for couples seeking excellence",
    "about-histoire-title": "Our Story",
    "about-histoire-text":
      "Founded by an aviation enthusiast, Romantic Getaway was born from the desire to create unforgettable moments by combining the charm of private flights with stays in exceptional places.",
    "about-experiences-title": "Unique Experiences",
    "about-experiences-text":
      "Each itinerary is carefully crafted for moments of complicity",
    "about-vols-title": "Private Flights",
    "about-vols-text":
      "Discover the luxury of private flights from Halloween to exceptional destinations",
    "about-quote": '"We transform your escape dreams into reality"',

    // Experiences section
    "experiences-title": "Our Exceptional Experiences",
    "experiences-subtitle":
      "Discover our selection of unforgettable establishments. One flight, one region, a thousand emotions to share",
    "experiences-cta": "Explore our escapes",

    // Footer
    "footer-contact": "Contact",
    "footer-social": "Follow us",
    "footer-instagram": "Join us on Instagram",
    "footer-copyright": "© 2024 Romantic Getaway. All rights reserved.",

    // Getaways page
    "echappees-title": "Our Exceptional Stays",
    "echappees-subtitle":
      "2 romantic stay packages with private driver in the Loire Valley - Castles, spa and exceptional gastronomy",
    "echappees-section-title": "Choose your getaway",
    "echappees-section-subtitle":
      "Two unique romantic experiences combining luxury, romance and discovery of Loire castles with private driver",

    // Discovery package
    "decouverte-title": "Discovery",
    "decouverte-location": "Domaine de l'Arbrelle, Amboise",
    "decouverte-price": "€750 per person",
    "decouverte-popular": "Popular",
    "decouverte-cta": "Discover this getaway",
    "decouverte-feature1": "Refined 20m² room with view",
    "decouverte-feature2": "Breakfast included",
    "decouverte-feature3": "Visit to Amboise castles",
    "decouverte-feature4": "Partner discounts",

    // Signature package
    "signature-title": "Signature Stay",
    "signature-location": "Le Clos d'Amboise",
    "signature-price": "€1200 per person",
    "signature-premium": "Premium",
    "signature-cta": "Discover this getaway",
    "signature-feature1": "Charming 27m² room with park view",
    "signature-feature2": "Couple massage (1h) + spa (30min)",
    "signature-feature3": "Gastronomic experience & brunch",
    "signature-feature4": "Access to heated outdoor pool",

    // Reservation form
    "reservation-title": "Book your getaway",
    "reservation-subtitle": "Plan your romantic stay in a few simple steps",
    "reservation-step1": "Type of stay",
    "reservation-step2": "Travelers",
    "reservation-step3": "Dates",
    "reservation-step4": "Summary",

    // Breadcrumbs
    "breadcrumb-home": "Home",
    "breadcrumb-echappees": "Our Getaways",
    "breadcrumb-decouverte": "Discovery Package",
    "breadcrumb-signature": "Signature Stay",

    // Practical information
    "info-title": "Practical information",
    "info-subtitle": "We take care of everything, you enjoy our expertise.",
    "info-depart": "Departure",
    "info-depart-text": "Pickup from your home.",
    "info-activites": "Activities",
    "info-activites-text":
      "Discovery of different castles, varied activities according to season and weather.",
    "info-trajet": "Journey",
    "info-trajet-text":
      "Travel in a premium vehicle, signature breakfast during the journey.",
    "info-repas": "Meals",
    "info-repas-text": "All-inclusive package, from breakfast to dinner.",
    "info-hebergement": "Accommodation",
    "info-hebergement-text":
      "Signature accommodation, worthy of the romantic stay.",

    // Signature page
    "signature-hero-title": "Signature Stay",
    "signature-hero-subtitle":
      "Premium romantic experience at Clos d'Amboise - Spa, Gastronomy and Loire Castles",
    "signature-clos-title": "Le Clos d'Amboise",
    "signature-clos-text": "One night in a double comfort room with breakfast.",
    "signature-nuitee-title": "The Night",
    "signature-bienetre-title": "Wellness",
    "signature-repas-title": "Meals",
    "signature-activites-title": "Activities",

    // Discovery page
    "decouverte-hero-title": "Discovery Package",
    "decouverte-hero-subtitle":
      "2-day romantic stay at Domaine de l'Arbrelle in Amboise - Loire Castles",
    "decouverte-domaine-title": "Domaine de l'arbrelle",
    "decouverte-liberte-title": "Freedom",
    "decouverte-repas-title": "Meals",
    "decouverte-activites-title": "Activities",

    // Contact
    "contact-title": "Appointment Booking",
    "contact-text":
      "Would you like to know more or schedule an appointment? Contact us directly, we will be delighted to talk with you.",
    "contact-email": "By email:",
    "contact-phone": "By phone:",
  },

  ru: {
    // Navigation
    "nav-title": "Романтический",
    "nav-subtitle": "Побег",
    "nav-signature": "Сигнатура",
    "nav-echappees": "Наши Туры",
    "nav-decouverte": "Открытие",
    "nav-recapitulatif": "Резюме",
    "nav-reserve": "Забронировать",
    "nav-menu": "Меню",
    "language-selector": "Язык:",

    // Homepage
    "hero-title": "Романтический Побег",
    "hero-subtitle":
      "Исключительные романтические поездки в долину Луары с личным водителем - Замки, спа и гастрономия",
    "hero-cta1": "Открыть наши туры",
    "hero-cta2": "Узнать больше",

    // About section
    "about-title": "Наша Страсть - доставлять вам удовольствие",
    "about-subtitle":
      "Создатели уникальных романтических поездок в долину Луары с личным водителем для пар, ищущих совершенство",
    "about-histoire-title": "Наша История",
    "about-histoire-text":
      "Основанная энтузиастом авиации, Романтический Побег родилась из желания создавать незабываемые моменты, сочетая очарование частных полетов с пребыванием в исключительных местах.",
    "about-experiences-title": "Уникальные Впечатления",
    "about-experiences-text":
      "Каждый маршрут тщательно продуман для моментов близости",
    "about-vols-title": "Частные Полеты",
    "about-vols-text":
      "Откройте для себя роскошь частных полетов с Хэллоуина в исключительные направления",
    "about-quote": '"Мы превращаем ваши мечты о побеге в реальность"',

    // Experiences section
    "experiences-title": "Наши Исключительные Впечатления",
    "experiences-subtitle":
      "Откройте наш выбор незабываемых заведений. Один полет, один регион, тысяча эмоций для разделения",
    "experiences-cta": "Исследовать наши туры",

    // Footer
    "footer-contact": "Контакт",
    "footer-social": "Следите за нами",
    "footer-instagram": "Присоединяйтесь к нам в Instagram",
    "footer-copyright": "© 2024 Романтический Побег. Все права защищены.",

    // Getaways page
    "echappees-title": "Наши Исключительные Поездки",
    "echappees-subtitle":
      "2 пакета романтических поездок с личным водителем в долину Луары - Замки, спа и исключительная гастрономия",
    "echappees-section-title": "Выберите свой побег",
    "echappees-section-subtitle":
      "Два уникальных романтических опыта, сочетающих роскошь, романтику и открытие замков Луары с личным водителем",

    // Discovery package
    "decouverte-title": "Открытие",
    "decouverte-location": "Домен де л'Арбрель, Амбуаз",
    "decouverte-price": "750€ с человека",
    "decouverte-popular": "Популярный",
    "decouverte-cta": "Открыть этот тур",
    "decouverte-feature1": "Изысканная комната 20м² с видом",
    "decouverte-feature2": "Завтрак включен",
    "decouverte-feature3": "Посещение замков Амбуаза",
    "decouverte-feature4": "Скидки у партнеров",

    // Signature package
    "signature-title": "Сигнатурная Поездка",
    "signature-location": "Ле Кло д'Амбуаз",
    "signature-price": "1200€ с человека",
    "signature-premium": "Премиум",
    "signature-cta": "Открыть этот тур",
    "signature-feature1": "Очаровательная комната 27м² с видом на парк",
    "signature-feature2": "Парный массаж (1ч) + спа (30мин)",
    "signature-feature3": "Гастрономический опыт и бранч",
    "signature-feature4": "Доступ к подогреваемому открытому бассейну",

    // Reservation form
    "reservation-title": "Забронируйте свой побег",
    "reservation-subtitle":
      "Спланируйте свою романтическую поездку в несколько простых шагов",
    "reservation-step1": "Тип поездки",
    "reservation-step2": "Путешественники",
    "reservation-step3": "Даты",
    "reservation-step4": "Резюме",

    // Breadcrumbs
    "breadcrumb-home": "Главная",
    "breadcrumb-echappees": "Наши Туры",
    "breadcrumb-decouverte": "Пакет Открытие",
    "breadcrumb-signature": "Сигнатурная Поездка",

    // Practical information
    "info-title": "Практическая информация",
    "info-subtitle": "Мы заботимся обо всем, вы наслаждаетесь нашим опытом.",
    "info-depart": "Отправление",
    "info-depart-text": "Встреча у вашего дома.",
    "info-activites": "Мероприятия",
    "info-activites-text":
      "Открытие различных замков, разнообразные мероприятия в зависимости от сезона и погоды.",
    "info-trajet": "Путешествие",
    "info-trajet-text":
      "Путешествие в премиум автомобиле, фирменный завтрак во время поездки.",
    "info-repas": "Питание",
    "info-repas-text": "Пакет все включено, от завтрака до ужина.",
    "info-hebergement": "Размещение",
    "info-hebergement-text":
      "Фирменное размещение, достойное романтической поездки.",

    // Signature page
    "signature-hero-title": "Сигнатурная Поездка",
    "signature-hero-subtitle":
      "Премиум романтический опыт в Кло д'Амбуаз - Спа, Гастрономия и Замки Луары",
    "signature-clos-title": "Ле Кло д'Амбуаз",
    "signature-clos-text":
      "Одна ночь в двухместном комфортабельном номере с завтраком.",
    "signature-nuitee-title": "Ночь",
    "signature-bienetre-title": "Велнес",
    "signature-repas-title": "Питание",
    "signature-activites-title": "Мероприятия",

    // Discovery page
    "decouverte-hero-title": "Пакет Открытие",
    "decouverte-hero-subtitle":
      "2-дневная романтическая поездка в Домен де л'Арбрель в Амбуазе - Замки Луары",
    "decouverte-domaine-title": "Домен де л'арбрель",
    "decouverte-liberte-title": "Свобода",
    "decouverte-repas-title": "Питание",
    "decouverte-activites-title": "Мероприятия",

    // Contact
    "contact-title": "Запись на встречу",
    "contact-text":
      "Хотите узнать больше или назначить встречу? Свяжитесь с нами напрямую, мы будем рады поговорить с вами.",
    "contact-email": "По электронной почте:",
    "contact-phone": "По телефону:",
  },
};

// Fonction pour obtenir la langue actuelle
// Fonction pour détecter automatiquement la langue du navigateur
function detectBrowserLanguage() {
  // Obtenir les langues du navigateur
  const browserLanguages = navigator.languages || [
    navigator.language || navigator.browserLanguage || "fr",
  ];

  // Langues supportées par notre site
  const supportedLanguages = ["fr", "en", "ru"];

  // Chercher la première langue supportée
  for (let browserLang of browserLanguages) {
    // Extraire le code de langue (ex: 'en-US' -> 'en')
    const langCode = browserLang.split("-")[0].toLowerCase();

    // Vérifier si la langue est supportée
    if (supportedLanguages.includes(langCode)) {
      console.log(
        `🌍 Langue détectée automatiquement: ${langCode} (${browserLang})`
      );
      return langCode;
    }
  }

  // Si aucune langue supportée détectée, utiliser le français par défaut
  console.log("🌍 Langue par défaut: français (fr)");
  return "fr";
}

// Fonction pour obtenir la langue actuellement sélectionnée
function getCurrentLanguage() {
  // Si l'utilisateur a déjà fait un choix manuel, le respecter
  const savedLanguage = localStorage.getItem("selectedLanguage");
  if (savedLanguage) {
    return savedLanguage;
  }

  // Sinon, détecter automatiquement et sauvegarder
  const detectedLanguage = detectBrowserLanguage();
  localStorage.setItem("selectedLanguage", detectedLanguage);
  return detectedLanguage;
}

// Fonction pour changer la langue
function changeLanguage(language) {
  // Sauvegarder le choix manuel de l'utilisateur
  localStorage.setItem("selectedLanguage", language);
  console.log(`👤 Langue changée manuellement vers: ${language}`);

  // Appliquer la nouvelle traduction
  translatePage();

  // Animation de transition fluide
  if (typeof gsap !== "undefined") {
    const elements = document.querySelectorAll("[data-translate]");
    gsap.fromTo(
      elements,
      { opacity: 0.7, y: 5 },
      {
        opacity: 1,
        y: 0,
        duration: 0.4,
        stagger: 0.02,
        ease: "power2.out",
      }
    );
  }
}

// Fonction pour traduire la page
function translatePage() {
  const currentLang = getCurrentLanguage();
  const elements = document.querySelectorAll("[data-translate]");

  elements.forEach((element) => {
    const key = element.getAttribute("data-translate");
    if (translations[currentLang] && translations[currentLang][key]) {
      if (element.tagName === "INPUT" && element.type === "submit") {
        element.value = translations[currentLang][key];
      } else if (
        element.tagName === "INPUT" &&
        element.placeholder !== undefined
      ) {
        element.placeholder = translations[currentLang][key];
      } else {
        element.textContent = translations[currentLang][key];
      }
    }
  });

  // Mettre à jour l'attribut lang de la page
  document.documentElement.setAttribute("lang", currentLang);

  // Mettre à jour les liens selon la langue
  updateLanguageSpecificContent(currentLang);
}

// Fonction pour mettre à jour le contenu spécifique à la langue
function updateLanguageSpecificContent(lang) {
  // Mettre à jour les meta descriptions
  const metaDesc = document.querySelector('meta[name="description"]');
  if (metaDesc && translations[lang]["meta-description"]) {
    metaDesc.setAttribute("content", translations[lang]["meta-description"]);
  }

  // Mettre à jour le titre de la page
  if (translations[lang]["page-title"]) {
    document.title = translations[lang]["page-title"];
  }
}

// Fonction d'initialisation automatique de la langue
function initializeAutoLanguageDetection() {
  const currentLang = getCurrentLanguage();

  // Afficher un message informatif dans la console
  if (!localStorage.getItem("selectedLanguage")) {
    console.log(
      `🚀 Détection automatique de langue activée - Langue détectée: ${currentLang}`
    );

    // Optionnel: Afficher une notification discrète à l'utilisateur
    showLanguageDetectionNotification(currentLang);
  } else {
    console.log(`💾 Langue sauvegardée utilisée: ${currentLang}`);
  }

  // Appliquer immédiatement la traduction
  translatePage();
}

// Fonction pour afficher une notification discrète (optionnelle)
function showLanguageDetectionNotification(language) {
  // Créer une notification discrète qui disparaît automatiquement
  const notification = document.createElement("div");
  notification.style.cssText = `
    position: fixed;
    top: 100px;
    right: 20px;
    background: rgba(157, 177, 124, 0.95);
    color: white;
    padding: 12px 20px;
    border-radius: 10px;
    font-size: 14px;
    z-index: 1000;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    opacity: 0;
    transform: translateX(100%);
    transition: all 0.3s ease-out;
    font-family: 'Cinzel', serif;
  `;

  const languageNames = {
    fr: "Français",
    en: "English",
    ru: "Русский",
  };

  notification.innerHTML = `
    <div style="display: flex; align-items: center; gap: 8px;">
      <span style="font-size: 16px;">🌍</span>
      <span>Langue détectée: ${languageNames[language]}</span>
    </div>
  `;

  document.body.appendChild(notification);

  // Animation d'apparition
  setTimeout(() => {
    notification.style.opacity = "1";
    notification.style.transform = "translateX(0)";
  }, 100);

  // Masquer automatiquement après 4 secondes
  setTimeout(() => {
    notification.style.opacity = "0";
    notification.style.transform = "translateX(100%)";

    setTimeout(() => {
      if (notification.parentNode) {
        notification.parentNode.removeChild(notification);
      }
    }, 300);
  }, 4000);
}

// Initialiser la traduction au chargement de la page
document.addEventListener("DOMContentLoaded", function () {
  initializeAutoLanguageDetection();
});

// Exporter les fonctions pour utilisation globale
// Fonction pour réinitialiser la détection automatique
function resetLanguageDetection() {
  localStorage.removeItem("selectedLanguage");
  console.log("🔄 Détection automatique de langue réinitialisée");
  initializeAutoLanguageDetection();
}

// Fonction pour obtenir les informations de langue du navigateur (utilitaire)
function getBrowserLanguageInfo() {
  return {
    language: navigator.language,
    languages: navigator.languages,
    detected: detectBrowserLanguage(),
    current: getCurrentLanguage(),
    isAutoDetected: !localStorage.getItem("selectedLanguage"),
  };
}

window.getCurrentLanguage = getCurrentLanguage;
window.changeLanguage = changeLanguage;
window.translatePage = translatePage;
window.detectBrowserLanguage = detectBrowserLanguage;
window.initializeAutoLanguageDetection = initializeAutoLanguageDetection;
window.resetLanguageDetection = resetLanguageDetection;
window.getBrowserLanguageInfo = getBrowserLanguageInfo;
